@model RedactApplication.Models.UTILISATEURViewModel
@{
    ViewBag.Title = "Notification";
    ViewBag.id = Request.Params["hash"];
    ViewData["hash"] = Request.Params["hash"];
}
@section Scripts
{
<script type="text/javascript">
    jQuery(document).ready(function () {

        $('#userMotdepasse').keyup(function () {
            $('#result').html(checkStrength($('#userMotdepasse').val()))
        });

    });
 

    function checkEquality(){
        var mdp1 = $('#userMotdepasse').val();
        var mdp2 = $('#userMotdepasseConfirme').val();
        if(mdp2 > 0,mdp1 == mdp2){
            console.log('pass');
            $('#mdp-equality').html('Vos mots de passe concordent');
        }
        else {
            $('#mdp-equality').html('Les deux mots de passes ne sont pas identiques');
        }
    }

    $('#userMotdepasseConfirme').keyup(function()
    {
        checkEquality();
    });

    function checkStrength(password)
 {
  var strength = 0

  if (password.length < 6) {
   $('#result').removeClass();
   $('#result').addClass('short');
   return 'Mot de passe trop court !';
  }

  if (password.length > 8) {
            strength += 1;
        }

  if (password.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)) {
            strength += 1;
        }
  if (password.match(/([a-zA-Z])/) && password.match(/([0-9])/)) {
            strength += 1
        }

  if (password.match(/([!,%,&,#,$,^,*,?,_,~])/)) {
            strength += 1
        }

  if (password.match(/(.*[!,%,&,#,$,^,*,?,_,~].*[!,%,&,#,$,^,*,?,_,~])/)) {
            strength += 1
        }

  if (strength < 2 )
  {
   $('#result').removeClass();
            $('#result').addClass('weak');
      return 'Mot de passe trop faible !';
  }
  else if (strength == 2 )
  {
   $('#result').removeClass();
   $('#result').addClass('good');
      return 'Mot de passe est bon !';
  }
  else
  {
   $('#result').removeClass();
   $('#result').addClass('strong');
      return 'Mot de passe est fort !';
  }
  }
</script>
}


<div class="flex-content flex-jcenter-acenter flex-col pop-up">
    <div class="popup-container with-shadow">
        <div class="head gradient-blue">
            <h1>Terminé</h1>
        </div>
        <div class="content-section text-centered icon-bottom" id="reset-password">
            <i class="pop-icon green-bg"></i>
            <p>Veuillez entrer votre nouveau mot de passe et cliquez sur le bouton "Réinitialiser le mot de passe" pour l'enregistrer.
            Utilisez au mois 8 caractères.
            </p>
            @using (Html.BeginForm("ConfirmUpdatePassword", "Login", new { token = @ViewBag.userId }, FormMethod.Post, new { @class = "formfields" }))
            {

                @Html.PasswordFor(x => x.userMotdepasse, new { @placeholder = "Nouveau mot de passe ", @required = true , @minlength = "8" })
                @Html.PasswordFor(x => x.userMotdepasseConfirme, new { @placeholder = "Confirmer mot de passe", @required = true, @minlength = "8" })
                <div id="mdp-equality"></div>
                <div id="result"></div>

                <input type="submit" value="Reset" class="btn btn-primary">
                @Html.ActionLink("Annuler", "Accueil", "Login", new { id = "" }, new { @class = "btn btn-warning" })

            }
        </div>
    </div>

</div>




